@(review: Form[forms.report.ReportReviewModel], report: forms.report.ReportFormModel, id:CompaniesHouseId, companyName: String, df: org.joda.time.format.DateTimeFormatter, mapping: Mapping[forms.report.ReportFormModel])

    @import helpers.ReviewPageData

<h1 class="heading-xlarge">Check your report before publishing</h1>
<div class="notice">
    <i class="icon icon-important"><span class="visually-hidden">Warning</span></i>
    <strong>If your report is incorrect or misleading, you could face a fine.</strong>
</div>

@if(!review("confirmed").value.contains("true")) {
    <div class="error-summary" role="group" aria-labelledby="error-summary-heading" tabindex="-1">
        <h1 class="heading-medium error-summary-heading" id="error-summary-heading">
            You need to confirm this report before publishing it
        </h1>
        <p>Please confirm this report by ticking the checkbox below.</p>
    </div>
    @review.errors.map { e =>
      @e
    }
}

@for((cssClass, rows) <- ReviewPageData.groups(companyName, report)) {
    <table class="@cssClass">
    @for((name, value) <- rows) {
        <tr>
            <td class="key-column"> @name</td>
            <td>@value</td>
        </tr>
    }
    </table>
}

<form action="@routes.ReportController.postReview(id)" method="POST" style="float: left;
    margin-right: 2em;">

    @for((k, v) <- mapping.unbind(report)) {
        <input type="hidden" name='@k' value="@HtmlFormat.escape(v)">
    }

    <div class="scannable-wrapper">
        <fieldset class='confirmation form-group'>
            <h3 class="bold-medium">Confirm this statement then publish your report</h3>

            <span class="error-message">You must tick the checkbox to proceed.</span>

            <label class="block-label" for="confirmed">
                <input type="checkbox" name="confirmed" id="confirmed" value="true">
                I confirm that the information provided in this report is accurate and has been approved by a director of my company or a designated member of my limited liability partnership.
            </label>
            <label class="block" for="confirmedBy">
                <input type="text" value="">
                Name of director who has approved this report.
            </label>
        </fieldset>
        <input type="submit" class="button" value="Publish your report">
        <input type="submit" name="revise" class="button button-secondary" value="Revise">
    </div>
</form>