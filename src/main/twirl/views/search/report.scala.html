@import org.joda.time.format.DateTimeFormatter
@import slicks.modules.FiledReport
@(report: FiledReport, company: services.CompanyDetail, df: DateTimeFormatter)

<div class="scannable-wrapper">
    <h1 class="heading-xlarge"> @company.company_name
    <p class="small-aside">Company number: @company.company_number.id</p>
    </h1>

    <h2 class="heading-large">
        Reporting period:<br>
        <span class="nowrap">@df.print(report.period.startDate)</span> to <span class="nowrap">@df.print(report.period.endDate)</span>
        <hr>
    </h2>



    <div class="notice">
        <i class="icon icon-important">
            <span class="visually-hidden">Warning</span>
        </i>
        <strong>This information is as reported by the business, and is in their own words.</strong>
    </div>

    <h3 class="heading-medium">Payment statistics</h3>
    <p>Average time taken to pay invoices: <span class="datum">@report.paymentHistory.averageDaysToPay days</span></p>

    <p>
        Invoices paid:
    </p>
    <ul class="list list-bullet">
        <li>within 30 days: <span class="datum">@report.paymentHistory.percentInvoicesWithin30Days%</span></li>
        <li>between 31 and 60 days: <span class="datum">@report.paymentHistory.percentInvoicesWithin60Days%</span></li>
        <li>61 days or more: <span class="datum">@report.paymentHistory.percentInvoicesBeyond60Days%</span></li>
    </ul>

    <p>Invoices not paid within agreed terms: <span class="datum">@report.paymentHistory.percentPaidLaterThanAgreedTerms%</span></p>

    <h3 class="heading-medium">Payment terms</h3>
    <h4 class="heading-small">Standard payment terms</h4>
    <p>
        @shared._multiline(report.paymentTerms.paymentTerms)
    </p>
    <h4 class="heading-small">Standard payment period</h4>
    <p>
        @report.paymentTerms.paymentPeriod days
    </p>
    <h4 class="heading-small">Maximum contractual period</h4>
    <p>
        @(report.paymentTerms.maximumContractPeriodComment.map(shared._multiline(_)))
    </p>
    <h4 class="heading-small">Were there any changes to the payment terms in the reporting period?</h4>
    <p>
        @report.paymentTerms.paymentTermsChangedComment.map { text =>
            <strong>Yes </strong>&ndash; @shared._multiline(text)
        }.getOrElse {
            <strong>No</strong>
        }
    </p>
    @if(report.paymentTerms.paymentTermsChangedComment.isDefined) {
        <h4 class="heading-small">Were suppliers notified or consulted about these changes?</h4>
        <p>
            @report.paymentTerms.paymentTermsChangedNotifiedComment.map { text =>
                <strong>Yes </strong>&ndash; shared._multiline(companyReport.report.PaymentTermsChangedNotifiedComment)
            }.getOrElse {
                <strong>No</strong>
            }
        </p>
    }
    <h4 class="heading-small">Any other information about standard payment terms</h4>
    <p>
        @report.paymentTerms.paymentTermsComment.map(text => shared._multiline(text)).getOrElse(<em>N/A</em>)
    </p>
    <h3 class="heading-medium">Dispute resolution process</h3>
    <p>
        @shared._multiline(report.paymentTerms.disputeResolution)
    </p>

    <h3 class="heading-medium">Other payment information</h3>
    <h4 class="heading-small">
        Has this business signed up to a code of conduct or standards on payment practices? If so, which?
        <span class="form-hint">For example, signatories to The Prompt Payment Code must commit to paying 95% of their invoices within 60 days.</span>
    </h4>
    <p>
        @report.otherInfo.paymentCodes.map { text =>
            <strong>Yes </strong>&ndash; @shared._multiline(text)
        }.getOrElse {
            <strong>No</strong>
        }
    </p>
    <h4 class="heading-small">
        Does this business offer e-invoicing?
        <span class="form-hint">This is where suppliers can electronically submit and track invoices. Itâ€™s not just allowing suppliers to email them an invoice.
</span>
    </h4>
    <p>
        @report.otherInfo.offerEInvoicing.entryName.capitalize
    </p>

    <h4 class="heading-small">
        Does this business offer supply chain finance?
        <span class="form-hint">This is where a supplier who has submitted an invoice can be paid by a third-party finance provider earlier than the agreed payment date.
            The business would then pay the finance provider the invoiced sum by the payment date.</span>
    </h4>
    <p>
        @report.otherInfo.offerSupplyChainFinance.entryName.capitalize
    </p>
    <h4 class="heading-small">
        Under its payment practices and policies, can this business deduct sums from payments as a charge for remaining on a supplier list?
    </h4>
    <p>
        @report.otherInfo.retentionChargesInPolicy.entryName.capitalize
    </p>
    <h4 class="heading-small">
        Did this business actually do this during this reporting period?
    </h4>
    <p>
        @report.otherInfo.retentionChargesInPast.entryName.capitalize
    </p>
</div>